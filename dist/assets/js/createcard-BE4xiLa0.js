import{f as L}from"./main-BnTyHOgt.js";function T(e,n){if(!n)return;const t=document.createElement("article"),i=document.createElement("img"),a=document.createElement("div"),d=document.createElement("h3"),c=document.createElement("div"),p=document.createElement("span"),r=document.createElement("p"),s=document.createElement("button"),l=document.createElement("span");t.classList.add("card"),i.src=e.image,a.classList.add("cardContent"),d.innerText=e.title,c.classList.add("rating"),l.classList.add("cardTypeIcon"),p.classList.add("participants");let m=e.minParticipants,u=e.maxParticipants;if(p.innerText=m===u?m+" participants":m+"-"+u+" participants",e.description.length>50){if(e.description[50]==" ")r.innerText=e.description.substring(0,51);else{const o=e.description.substring(0,51).lastIndexOf(" ");r.innerText=e.description.substring(0,o)}r.innerText+="..."}else r.innerText=e.description;s.classList.add("BookThisRoom","bookBtn"),s.dataset.id=e.id,s.innerText="Book this room";for(let o=0;o<5;o++){const f=document.createElement("span");f.classList.add(o<e.rating?"fa-solid":"fa-regular","fa-star"),c.appendChild(f)}n.appendChild(t),t.appendChild(i),t.appendChild(a),t.appendChild(l),a.appendChild(d),c.appendChild(p),a.appendChild(c),a.appendChild(r),a.appendChild(s),requestAnimationFrame(()=>{t.classList.add("show")}),e.type==="online"?(p.innerText+=" (networked)",l.classList.add("fa-solid","fa-display"),s.innerText="Take challenge online"):(d.innerText+=" (on-site)",l.classList.add("fa-solid","fa-house"),s.innerText="Book this room")}function C(e,n){if(!e)return;if(e.innerHTML="",!n.length){e.innerHTML="<p>No challenges found.</p>";return}const t=document.createElement("div");t.classList.add("modal"),t.id="bookRoomModal",e.appendChild(t),n.forEach(i=>{T(i,e)})}document.addEventListener("DOMContentLoaded",async()=>{const e=document.getElementById("popularChallenges"),n=document.getElementById("allChallenges");e&&(e.innerHTML="<p>Loading…</p>"),n&&(n.innerHTML="<p>Loading…</p>");try{const t=await L();if(e){const i=[...t].sort((a,d)=>(d.rating??0)-(a.rating??0)).slice(0,3);C(e,i)}n&&C(n,t)}catch(t){console.error(t);const i="Could not fetch data. "+t.message;e&&(e.innerHTML='<p class="error">'+i+"</p>"),n&&(n.innerHTML='<p class="error">'+i+"</p>")}});export{C as r};
